import{c as H,E as J,w as Q,t as W}from"./element-plus.4c84fed9.js";import{b as X,f as Z,d as ee}from"./index.9623039f.js";import{P as te}from"./index.ce9653e5.js";import{_ as se,a as oe,b as ae,c as ne}from"./edit.vue_vue_type_script_setup_true_name_aServiceScheduleSettingEdit_lang.c1aaf858.js";import{d as le,s as g,r as w,$ as F,e as ie,a4 as y,af as ce,o as a,c as h,U as r,L as u,a as s,M as D,K as E,V as C,a7 as re,u as k,R as A,S as i,n as x,T as l,P as ue,b7 as de,b6 as pe}from"./@vue.e8706010.js";import{_ as _e}from"./lodash.ded75160.js";import"./@vueuse.1e5a6e21.js";import"./@element-plus.196c7323.js";import"./lodash-es.92e7f918.js";import"./dayjs.acb2afad.js";import"./axios.4ea15493.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./vue-router.12d45bc3.js";import"./pinia.dfca86b4.js";import"./vue-demi.ebc8116b.js";import"./css-color-function.c8e19b2b.js";import"./color.1121912c.js";import"./clone.9e59dbcb.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.72cc5392.js";import"./ms.a9ae1d6d.js";import"./nprogress.2a2760db.js";import"./vue-clipboard3.38dbacbe.js";import"./clipboard.78d63871.js";import"./echarts.8d7a50ae.js";import"./zrender.1084fa23.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.2cdc8407.js";const me=p=>(de("data-v-192e09bd"),p=p(),pe(),p),ve={class:"edit-popup"},fe={class:"new-add-wrap"},he=me(()=>s("div",null,"\u8BBE\u7F6E\u5217\u8868",-1)),Ee=i(" \u65B0\u589E "),be={class:"flex setting-content"},ge={class:"flex-col"},Fe={class:"setting-title"},De=i(" ~ "),Be={class:"setting-title"},Se={class:"setting-label"},we=i("\u671F\u95F4\u6BCF\u5929\uFF1A \u4E0A\u5348"),ye=i("\u4E2A\u53F7\uFF1B \u4E0B\u5348"),Ce=i("\u4E2A\u53F7\uFF1B \u665A\u4E0A"),ke=i("\u4E2A\u53F7 "),Ae={class:"flex-col",style:{width:"200px"}},xe={class:"operations"},Ve=le({__name:"arrange_service",props:{rowPersonData:{type:Object,default:()=>({})}},emits:["success","close"],setup(p,{expose:V,emit:$}){const _=g(),m=w(!1);g();const B=g(),P=w("add");let v=F({id:"",name:"",introduction:""});const c=F({loading:!1,scheduleSetData:[],collapseActiveNames:[]}),Y=ie(()=>{const e=v.name||"";return e?"\u670D\u52A1\u653E\u53F7\u8BBE\u7F6E | "+e:"\u670D\u52A1\u653E\u53F7\u8BBE\u7F6E"});F({});const f=async()=>{try{c.loading=!0;const e=await oe({service_person_id:v.id});c.scheduleSetData=[],_e.get(e,"lists",[]).map(o=>{o.boolEnabled=!1,o.enabled+""=="1"&&(o.boolEnabled=!0),c.scheduleSetData.push(o)}),c.loading=!1}catch{c.loading=!1}},N=async e=>{Object.assign(v,e),f()},R=async()=>{var e;m.value=!0,await x(),(e=_.value)==null||e.open("add")},T=async e=>{var o,n;m.value=!0,await x(),(o=_.value)==null||o.open("edit"),(n=_.value)==null||n.setFormData(e)},I=async e=>{await Z.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await ae({id:e}),f()},M=(e="add")=>{var o;P.value=e,(o=B.value)==null||o.open()},L=()=>{$("close")},U=async(e,o=!1)=>{const n={...e};n.enabled=o?"1":"0",await ne(n),f()};return V({open:M,setFormData:N}),(e,o)=>{const n=X,j=Q,O=y("Edit"),S=H,z=y("Delete"),K=W,q=J,b=ce("perms");return a(),h("div",ve,[r(te,{ref_key:"popupRef",ref:B,title:k(Y),async:!0,width:"900px",customClass:"global-arrange-service-pop",onClose:L,confirmButtonText:"",cancelButtonText:""},{default:u(()=>[s("div",fe,[he,D((a(),E(j,{class:"new-add-button",type:"primary",onClick:R},{icon:u(()=>[r(n,{name:"el-icon-Plus"})]),default:u(()=>[Ee]),_:1})),[[b,["a_service_schedule_setting/add"]]])]),r(q,{height:"550px"},{default:u(()=>[(a(!0),h(C,null,re(c.scheduleSetData,(t,G)=>(a(),h("div",{key:G},[s("div",{class:ue(["setting-item",{"setting-is-disabled":t.enabled+""!="1"}])},[s("div",be,[s("div",ge,[s("div",null,[s("span",Fe,l(e.$filters.formatDate(t.start_date,"YYYY.MM.DD")),1),De,s("span",Be,l(e.$filters.formatDate(t.end_date,"YYYY.MM.DD")),1),s("span",Se,l(t.label?` | ${t.label}`:""),1)]),s("div",null,[s("div",null,[we,s("strong",null,l(t.am_service_times||0),1),ye,s("strong",null,l(t.pm1_service_times||0),1),Ce,s("strong",null,l(t.pm2_service_times||0),1),ke])])]),s("div",Ae,[s("div",xe,[t.enabled+""=="1"?(a(),h(C,{key:0},[D((a(),E(S,{class:"operation-btn",onClick:d=>T(t),title:"\u4FEE\u6539\u8BBE\u7F6E"},{default:u(()=>[r(O)]),_:2},1032,["onClick"])),[[b,["a_service_schedule_settingerson/edit"]]]),D((a(),E(S,{class:"operation-btn",onClick:d=>I(t.id),title:"\u5220\u9664\u8BBE\u7F6E"},{default:u(()=>[r(z)]),_:2},1032,["onClick"])),[[b,["a_service_schedule_settingerson/delete"]]])],64)):A("",!0),r(K,{modelValue:t.boolEnabled,"onUpdate:modelValue":d=>t.boolEnabled=d,onChange:d=>U(t,d)},null,8,["modelValue","onUpdate:modelValue","onChange"]),i(" "+l(t.boolEnabled?"\u542F\u7528":"\u7981\u7528"),1)])])])],2)]))),128))]),_:1})]),_:1},8,["title"]),m.value?(a(),E(se,{key:0,ref_key:"editRef",ref:_,rowPersonData:k(v),onSuccess:f,onClose:o[0]||(o[0]=t=>m.value=!1)},null,8,["rowPersonData"])):A("",!0)])}}});const mt=ee(Ve,[["__scopeId","data-v-192e09bd"]]);export{mt as default};
